{% extends 'base.html' %}

{% block content %}
<h2>Operator Report</h2>

<div class="section-card">
  <div class="field-row">
    <div class="field">
      <label for="start-date">Start Date</label>
      <input type="date" id="start-date" />
    </div>
    <div class="field">
      <label for="end-date">End Date</label>
      <input type="date" id="end-date" />
    </div>
    <div class="field">
      <label>Operator</label>
      <div id="operator-wrapper"></div>
    </div>
    <button type="button" id="run-report">Run</button>
  </div>
</div>

<details id="charts" class="section-card">
  <summary>Preview Charts</summary>
  <div>
    <div id="dailySection" class="chart-block">
      <canvas id="dailyChart"></canvas>
      <div class="chart-summary">
        <p id="dailyDesc"></p>
        <table id="dailyTable" class="data-table">
          <thead>
            <tr><th>Date</th><th>Reject %</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
    <div id="assemblySection" class="chart-block">
      <table id="assemblyTotals" class="data-table">
        <thead>
          <tr><th>Assembly</th><th>Inspected</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</details>

<div id="download-controls" class="field-row" style="display:none">
  <div class="field">
    <label for="file-format">Format</label>
    <select id="file-format">
      <option value="pdf">pdf</option>
      <option value="html">html</option>
    </select>
  </div>
  <button id="download-report">Download</button>
  <span class="spinner" id="download-spinner" hidden></span>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" src="{{ url_for('static', filename='js/operator_report.js') }}"></script>
{% endblock %}
