<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MOAA</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="{% if user_role == 'EMPLOYEE' %}employee-layout{% endif %}">
  {% if user_role != 'EMPLOYEE' %}
  <header class="app-header">
    <nav class="navbar" role="navigation" aria-label="Primary">
      <div class="nav-left">
        <a class="logo" href="{{ url_for('main.home') }}">
          <img src="{{ url_for('static', filename='images/company-logo.png')}}" alt="Spectra Tech Manufacturing">
        </a>
        <div class="brand-block">
          <span class="brand-title">Spectra Operations Suite</span>
          <span class="brand-subtitle">Manufacturing Oversight &amp; Analytics</span>
        </div>
      </div>
      <div class="nav-center">
        <ul class="nav-links">
          <li class="nav-item"><a href="{{ url_for('main.home') }}">Home</a></li>
          <li class="nav-item">
            <a href="#">Analysis <span class="arrow">&#9662;</span></a>
            <div class="dropdown" role="menu">
              <a href="{{ url_for('main.ppm_analysis') }}">PPM Analysis</a>
              <a href="{{ url_for('main.aoi_grades_page') }}">AOI &amp; FI Analysis</a>
              <a href="{{ url_for('main.aoi_daily_reports') }}">AOI Daily Reports</a>
              <a href="{{ url_for('main.fi_daily_reports') }}">FI Daily Reports</a>
            </div>
          </li>
          <li class="nav-item">
            <a href="#">Tools <span class="arrow">&#9662;</span></a>
            <div class="dropdown" role="menu">
              <a href="#">Rework Stencil Lookup</a>
              <a href="#">Verified Part Markings</a>
              <a href="{{ url_for('main.assembly_forecast') }}">Assembly Forecast</a>
            </div>
          </li>
          <li class="nav-item">
            <a href="#">Production <span class="arrow">&#9662;</span></a>
            <div class="dropdown" role="menu">
              <a href="#"><em>Jobs</em></a>
              <a href="#"><em>SPC Dashboard</em></a>
            </div>
          </li>
          <li class="nav-item">
            <a href="#">Reports <span class="arrow">&#9662;</span></a>
            <div class="dropdown" role="menu">
              <a href="{{ url_for('main.integrated_report') }}">AOI Integrated Report</a>
              <a href="{{ url_for('main.operator_report') }}">Operator Report</a>
              <a href="{{ url_for('main.aoi_daily_report_page') }}">AOI Daily Report</a>
            </div>
          </li>
        </ul>
      </div>
      <div class="nav-right">
        {% if username %}
        <span class="user-text">Signed in as {{ username }}</span>
        {% endif %}
        <a class="nav-utility" href="#">Docs</a>
        {% if user_role == 'ADMIN' %}
        <a class="nav-utility" href="{{ url_for('main.admin_panel') }}">Admin Console</a>
        {% endif %}
        <a class="nav-utility" href="{{ url_for('auth.logout') }}" data-track-session-end="true">Logout</a>
      </div>
    </nav>
  </header>
  {% endif %}
  <main class="content" role="main">
    {% block content %}{% endblock %}
  </main>
  {% set tracking_context = {
    'user': {
      'id': user_id,
      'name': username,
      'role': user_role,
    },
    'tracking': {
      'sessionId': tracking_session_id,
      'clickUrl': url_for('main.tracking_click_event'),
      'sessionStartUrl': url_for('main.tracking_session_start'),
      'sessionEndUrl': url_for('main.tracking_session_end'),
    }
  } %}
  <script>
    window.APP_CONTEXT = {{ tracking_context | tojson }};
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  {% block scripts %}{% endblock %}
</body>
</html>
