<section class="section-card">
  <h2>Insights &amp; Metrics</h2>
  <div class="two-column">
    <div>
      <h3>Highlights</h3>
      <ul>
        {% for item in insights.highlights or [] %}
        <li>{{ item }}</li>
        {% endfor %}
      </ul>
      <h3>Opportunities</h3>
      <ul>
        {% for item in insights.opportunities or [] %}
        <li>{{ item }}</li>
        {% endfor %}
        {% if (insights.opportunities or [])|length == 0 %}
        <li>No urgent opportunities identified.</li>
        {% endif %}
      </ul>
    </div>
    <div>
      <h3>Defect Distribution</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Group</th>
            <th>Count</th>
            <th>Share</th>
          </tr>
        </thead>
        <tbody>
          {% for row in (defectDistributions.byDefectCode or [])[:6] %}
          <tr>
            <td>{{ row.label }}</td>
            <td>{{ row.count }}</td>
            <td>{{ (row.share * 100)|round(1) }}%</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>
