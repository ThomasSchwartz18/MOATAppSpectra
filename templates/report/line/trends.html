<section class="report-section">
  <h2>Trend Insights</h2>
  <div class="chart-grid chart-grid--single">
    <div class="chart-block chart-block--wide">
      <h3>False Call PPM vs Defect DPM</h3>
      <img src="{{ linePpmDpmComparisonImg }}" alt="False Call PPM versus Defect DPM" />
      <div class="chart-summary">
        <p>Dual-axis comparison of false-call intensity against confirmed defect rates.</p>
      </div>
    </div>
  </div>
  <div class="chart-grid chart-grid--two">
    <div class="chart-block">
      <h3>False Calls per Board</h3>
      <img src="{{ lineFalseCallSmallMultiplesImg }}" alt="False Calls per Board small multiples" />
      <div class="chart-summary">
        <p>Small-multiple view of false-call rates for each AOI line.</p>
      </div>
    </div>
    <div class="chart-block">
      <h3>Defects per Board</h3>
      <img src="{{ lineDefectSmallMultiplesImg }}" alt="Defects per Board small multiples" />
      <div class="chart-summary">
        <p>Line-by-line trend of confirmed defects normalized per board.</p>
      </div>
    </div>
  </div>
  <div class="kpi-grid">
    <div class="section-card">
      <h3>Line Drift</h3>
      <ul>
        {% for item in trendInsights.lineDrift[:6] %}
        <li>{{ item.line }}: {{ item.start|round(2) }}% → {{ item.end|round(2) }}% (Δ {{ item.change|round(2) }})</li>
        {% else %}
        <li>No significant drift detected.</li>
        {% endfor %}
      </ul>
    </div>
    <div class="section-card">
      <h3>Assembly Learning Curves</h3>
      <ul>
        {% for item in trendInsights.assemblyLearning[:6] %}
        <li>{{ item.assembly }} on {{ item.line }}: {{ item.start[1]|round(2) }}% → {{ item.end[1]|round(2) }}% (Δ {{ item.change|round(2) }})</li>
        {% else %}
        <li>No repeated assembly runs detected.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</section>
