{% extends 'base.html' %}

{% block content %}
<h2>Integrated Report</h2>

<div class="section-card">
  <div class="field-row">
    <div class="field">
      <label for="start-date">Start Date</label>
      <input type="date" id="start-date" />
    </div>
    <div class="field">
      <label for="end-date">End Date</label>
      <input type="date" id="end-date" />
    </div>
    <button type="button" id="run-report">Run</button>
  </div>
</div>

  <div id="charts" class="section-card">
    <div class="chart-block">
      <canvas id="yieldTrendChart"></canvas>
      <div class="chart-summary">
        <p id="yieldTrendDesc"></p>
      </div>
    </div>
    <div class="chart-block">
      <canvas id="operatorRejectChart"></canvas>
      <div class="chart-summary">
        <p id="operatorRejectDesc"></p>
      </div>
    </div>
    <div class="chart-block">
      <canvas id="modelFalseCallsChart"></canvas>
      <div class="chart-summary">
        <p id="modelFalseCallsDesc"></p>
        <table id="problem-assemblies" class="data-table"><tbody></tbody></table>
      </div>
    </div>
  </div>

<div class="field-row" id="download-controls">
  <div class="field">
    <label for="file-format">Format</label>
    <select id="file-format">
      <option value="pdf">pdf</option>
      <option value="xlsx">xlsx</option>
    </select>
  </div>
  <button id="download-report">Download</button>
  <button id="email-report">Email Report</button>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="{{ url_for('static', filename='js/integrated_report.js') }}"></script>
{% endblock %}
